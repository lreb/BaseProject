<div class="detail-container">
  <!-- Estado de carga -->
  <div *ngIf="loading$ | async" class="loading">
    <div class="spinner"></div>
    <p>Cargando producto...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error$ | async as error" class="error">
    <h3>‚ùå Error al cargar el producto</h3>
    <p>{{ error.message || 'Error desconocido' }}</p>
    <button class="btn-secondary" (click)="onBack()">Volver a la lista</button>
  </div>

  <!-- Detalles del producto -->
  <div *ngIf="(product$ | async) as product" class="detail-content">
    <header class="detail-header">
      <div>
        <h1>{{ product.name }}</h1>
        <span class="category-badge">{{ product.category }}</span>
      </div>
      <div class="header-actions">
        <button class="btn-secondary" (click)="onBack()">
          ‚Üê Volver
        </button>
        <button class="btn-primary" (click)="onEdit(product.id)">
          ‚úèÔ∏è Editar
        </button>
        <button class="btn-danger" (click)="onDelete(product.id, product.name)">
          üóëÔ∏è Eliminar
        </button>
      </div>
    </header>

    <div class="detail-body">
      <section class="detail-section">
        <h2>Informaci√≥n General</h2>
        <div class="info-grid">
          <div class="info-item">
            <label>ID:</label>
            <span class="value">{{ product.id }}</span>
          </div>
          <div class="info-item">
            <label>Nombre:</label>
            <span class="value">{{ product.name }}</span>
          </div>
          <div class="info-item">
            <label>Categor√≠a:</label>
            <span class="value">{{ product.category }}</span>
          </div>
        </div>
      </section>

      <section class="detail-section">
        <h2>Descripci√≥n</h2>
        <p class="description">{{ product.description || 'Sin descripci√≥n' }}</p>
      </section>

      <section class="detail-section">
        <h2>Pricing & Inventario</h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Precio:</label>
            <span class="value price">${{ product.price | number:'1.2-2' }}</span>
          </div>
          <div class="info-item">
            <label>Stock:</label>
            <span class="value stock" [class.low-stock]="product.stock < 10">
              {{ product.stock }} unidades
            </span>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- Producto no encontrado -->
  <div *ngIf="!(loading$ | async) && !(product$ | async) && !(error$ | async)" class="not-found">
    <h2>‚ùå Producto no encontrado</h2>
    <p>El producto que buscas no existe o ha sido eliminado.</p>
    <button class="btn-primary" (click)="onBack()">Volver a la lista</button>
  </div>
</div>
